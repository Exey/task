>–ó–∞–¥–∞–Ω–∏–µ 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã
>–î–∞–Ω–æ:
>>–≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Å—Ç–µ–π:
>>- –ò–≥—Ä–∞-—Å–∏–º—É–ª—è—Ç–æ—Ä (–ª–∏–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ–±—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).
>>- C–µ—Ä–≤–∏—Å –¥–ª—è –º—ç—Ç—á–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
>>- –ú–æ–¥—É–ª—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∏ –ø–æ–¥–∞—á–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Å—É–¥ (—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Rafinad.AI).
>>- –†–æ–±–æ—Ç-—Å—É–¥—å—è (AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ –±—É–¥—É—â–µ–º).
>
>>–î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–µ—Ä–µ–∑:
>>- Telegram Mini App
>>- VK Mini App
>>- Web-–∫–∞–±–∏–Ω–µ—Ç
>>Backend –Ω–∞ Python (FastAPI), –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞.
>
>>–ù—É–∂–Ω–æ:
>>–°—Ö–µ–º–∞—Ç–∏—á–Ω–æ –∏–∑–æ–±—Ä–∞–∑–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (–º–æ–¥—É–ª–∏/—Å–µ—Ä–≤–∏—Å—ã –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ).
>>–ü–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ —á–∞—Å—Ç–∏ –≤ –µ–¥–∏–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É:
>>- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–ï–°–ò–ê/—Å–æ—Ü—Å–µ—Ç–∏).
>>- –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
>>- API-—à–ª—é–∑ / –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.

>>–ö–æ—Ä–æ—Ç–∫–æ –æ–±—ä—è—Å–Ω–∏—Ç—å, –∫–∞–∫ —Ä–µ—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É —Ä–∞–∑–Ω—ã—Ö —Ñ—Ä–æ–Ω—Ç–æ–≤ (Web, TG, VK).

### –° –ø–æ–º–æ—â—å—é –ø–∞—Ç—Ç–µ—Ä–Ω–∞ BFF üü°

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã (—Ü–≤–µ—Ç–∞ –ø–æ —Å–ª–æ—è–º)

- **üîµ –ö–ª–∏–µ–Ω—Ç—ã** ‚Äî Web, Telegram Mini App, VK Mini App  
- **üü° BFF (API Gateway)** ‚Äî –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, JWT-–≤–∞–ª–∏–¥–∞—Ü–∏—è, rate limiting  
- **üü¢ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã** ‚Äî —Å–ª–∞–±–æ—Å–≤—è–∑–∞–Ω–Ω—ã–µ, stateless, –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ REST (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ) –∏ Message Broker (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)  
  - `auth-svc` ‚Äî OAuth 2.0 + OIDC —Å –≤–Ω–µ—à–Ω–∏–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ ‚Üí –≤—ã–¥–∞—á–∞ JWT  
  - `user-profile-svc` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º, —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `ocr-svc` ‚Äî –ø—Ä–∏—ë–º —Ñ–∞–π–ª–æ–≤, –ø—É–±–ª–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥—å, —Ñ–æ–Ω–æ–≤—ã–π OCR  
  - `matching-svc` ‚Äî –ø–æ–¥–±–æ—Ä –ø–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∏—Å—Ç–µ—Ü/–æ—Ç–≤–µ—Ç—á–∏–∫) –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –∏ —Å–æ–±—ã—Ç–∏—è–º
  - `game-svc` ‚Äî –∏–≥—Ä–∞ —Å–∏–º—É–ª—è—Ü–∏—è —Å—É–¥–µ–±–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ –ª–∏–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  - `robot-judge-svc` ‚Äî  AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–µ–π—Å–æ–≤, –æ—Ü–µ–Ω–∫–∏ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤ –¥–µ–ª–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- **üî¥ –•—Ä–∞–Ω–∏–ª–∏—â–µ**  
  - **PostgreSQL** ‚Äî –µ–¥–∏–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ö–µ–º—ã –Ω–∞ —Å–µ—Ä–≤–∏—Å (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –º—ç—Ç—á–∏)  
  - **S3 / MinIO** ‚Äî –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã (—Å–∫–∞–Ω—ã, PDF)  
  - **Message Broker** (RabbitMQ / Redis) ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏  

```mermaid
graph TD
    classDef frontend stroke:#007bff,stroke-width:3px;
    classDef gateway stroke:#ffc107,stroke-width:3px;
    classDef service stroke:#28a745,stroke-width:3px;
    classDef data stroke:#dc3545,stroke-width:3px;
    classDef future stroke:#28a745,stroke-width:3px,stroke-dasharray: 5 5;

    %% –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ñ—Ä–æ–Ω—Ç—ã
    User[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å]
    subgraph Frontends [–°–ª–æ–π –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è]
        direction LR
        TG[Telegram Mini App]
        VK[VK Mini App]
        Web[Web-–∫–∞–±–∏–Ω–µ—Ç]
    end
    User --> TG
    User --> VK
    User --> Web

    %% API-—à–ª—é–∑
    API_GW[BFF / API-—à–ª—é–∑ –≤—Å–µ—Ö —Ñ—Ä–æ–Ω—Ç–æ–≤]
    TG -->|HTTPS / REST| API_GW
    VK -->|HTTPS / REST| API_GW
    Web -->|HTTPS / REST| API_GW
    class TG,VK,Web frontend;
    class API_GW gateway;

    %% –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
    subgraph Backend["–°–ª–æ–π –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –Ω–∞ FastAPI"]
        direction TB
        Auth_SVC[–°–µ—Ä–≤–∏—Å –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏<br>auth-svc]
        UserProfile_SVC[–°–µ—Ä–≤–∏—Å –ü—Ä–æ—Ñ–∏–ª–µ–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π<br>user-profile-sv—Å]
        Game_SVC[–°–µ—Ä–≤–∏—Å –ò–≥—Ä–∞-—Å–∏–º—É–ª—è—Ç–æ—Ä<br>game-svc]
        Matching_SVC[–°–µ—Ä–≤–∏—Å –ú—ç—Ç—á–∏–Ω–≥–∞<br>matching-svc]
        OCR_SVC[–°–µ—Ä–≤–∏—Å –î–æ–∫—É–º–µ–Ω—Ç–æ–≤<br>ocr-svc]
        RobotJudge_SVC[–°–µ—Ä–≤–∏—Å –ò–ò-–†–æ–±–æ—Ç-—Å—É–¥—å—è<br>robot-judge-svc]
    end
    class Auth_SVC,UserProfile_SVC,Game_SVC,Matching_SVC,OCR_SVC service;
    class RobotJudge_SVC future;

    API_GW --> Auth_SVC
    API_GW --> UserProfile_SVC
    API_GW --> Game_SVC
    API_GW --> Matching_SVC
    API_GW --> OCR_SVC
    API_GW -.-> RobotJudge_SVC

    %% –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
    Auth_SVC -.->|JWT-—Ç–æ–∫–µ–Ω—ã| UserProfile_SVC
    OCR_SVC -->|–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏| Matching_SVC

    %% –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö
    subgraph Data_Storage [–°–ª–æ–π –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö]
        PostgreSQL[(PostgreSQL)]
        S3[(S3 / MinIO)]
        MessageBroker[Message Broker<br>RabbitMQ / Redis]
    end
    class PostgreSQL,S3,MessageBroker data;

    UserProfile_SVC --> PostgreSQL
    Game_SVC --> PostgreSQL
    Matching_SVC --> PostgreSQL
    OCR_SVC --> PostgreSQL
    OCR_SVC --> S3
    OCR_SVC --> MessageBroker
```

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ö–ª–∏–µ–Ω—Ç ‚Üí **üü° BFF** ‚Üí **üü¢ auth-svc** ‚Üí (OAuth) ‚Üí JWT ‚Üí –∫–ª–∏–µ–Ω—Ç.  

–í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–µ—Å—É—Ç JWT ‚Üí **üü° BFF** –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç ‚Üí –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –≤ –Ω—É–∂–Ω—ã–π **üü¢ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å** —Å `user_id`.

## –•—Ä–∞–Ω–µ–Ω–∏–µ

- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Üí **üî¥ PostgreSQL**  
- –§–∞–π–ª—ã ‚Üí **üî¥ S3 / MinIO**  
- –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ ‚Üí **üî¥ Message Broker (Redis/Rabbit)**

```mermaid
graph TD
    classDef service stroke:#28a745,stroke-width:3px;
    classDef data stroke:#dc3545,stroke-width:3px;
    classDef mock stroke:#f8f9fa,stroke:#adb5bd,stroke-width:2px,stroke-dasharray: 4 4;

    %% –ë–î
    DB[(–ï–¥–∏–Ω–∞—è PostgreSQL<br/>–ë–î: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏,<br/>–¥–æ–∫—É–º–µ–Ω—Ç—ã, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)]

    %% –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è 
    Auth_SVC[–°–µ—Ä–≤–∏—Å –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏]
    Mock_ESIA[Mock-–ï–°–ò–ê –∑–∞–≥–ª—É—à–∫–∞]
    Mock_Socials[Mock-–°–æ—Ü—Å–µ—Ç–∏ –∑–∞–≥–ª—É—à–∫–∞]

    Auth_SVC -->|OAuth 2.0 + OIDC| Mock_ESIA
    Auth_SVC -->|OAuth 2.0| Mock_Socials
    Mock_ESIA -->|user_id| Auth_SVC
    Mock_Socials -->|user_id| Auth_SVC
    Auth_SVC -->|–ß—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å| DB

    %% –î–æ–∫—É–º–µ–Ω—Ç—ã
    Document_SVC[–°–µ—Ä–≤–∏—Å –î–æ–∫—É–º–µ–Ω—Ç–æ–≤]
    S3_Storage[(S3 / MinIO)]
    MsgBroker[(Message Broker)]

    Document_SVC -->|–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ| DB
    Document_SVC -->|–§–∞–π–ª—ã| S3_Storage
    Document_SVC -->|–ü—É–±–ª–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á–∏| MsgBroker

    Worker[–°–µ—Ä–≤–∏—Å OCR + AI Worker]
    Mock_Rafinad[Mock-Rafinad.AI –∑–∞–≥–ª—É—à–∫–∞]

    MsgBroker -->|–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏| Worker
    Worker -->|–†–µ–∑—É–ª—å—Ç–∞—Ç| Mock_Rafinad
    Mock_Rafinad -->|–û—Ç–≤–µ—Ç| Worker
    Worker -->|–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞| DB

    class Auth_SVC,Document_SVC,Worker service;
    class DB,S3_Storage,MsgBroker data;
    class Mock_ESIA,Mock_Socials,Mock_Rafinad mock;
```

>–ó–∞–¥–∞–Ω–∏–µ 2. –ü–ª–∞–Ω –∑–∞–ø—É—Å–∫–∞ MVP
>–î–∞–Ω–æ:
>>–í –ø—Ä–æ–µ–∫—Ç–µ –º–Ω–æ–≥–æ —Å–ª–æ–∂–Ω—ã—Ö –º–µ—Å—Ç: —Ä–∞–∑–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —É TG/VK Mini Apps,
>>–≤–Ω–µ—à–Ω–∏–µ API (–§–ù–°, –ï–°–ò–ê), OCR –∏ —Ä–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.
>–ù—É–∂–Ω–æ:
>>–ù–∞–∑–≤–∞—Ç—å 3 –≥–ª–∞–≤–Ω—ã—Ö —Ä–∏—Å–∫–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –≤–∏–¥–∏—Ç–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —ç—Ç–∞–ø–µ MVP.
>>–ö—Ä–∞—Ç–∫–æ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å, –∫–∞–∫ –∏—Ö –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
>>–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è API, –Ω–∞—á–∞—Ç—å —Å –æ–¥–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π OCR).
>

## –ö–ª—é—á–µ–≤—ã–µ —Ä–∏—Å–∫–∏ 
1. –í–Ω–µ—à–Ω–∏–µ API: –ï–°–ò–ê –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –±–∞–Ω–∫–∞–º, –≤ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ—á–µ–Ω—å –Ω–µ–ø—Ä–æ—Å—Ç–æ –ø–æ–ø–∞—Å—Ç—å (–ú–æ–π –æ–ø—ã—Ç –≤ –°–æ–ª–∞—Ä —Ç–æ–º—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
   - –ë–∞–Ω–∫ –ø–∞—Ä—Ç–Ω–µ—Ä –Ω–µ–æ–±—Ö–æ–¥–∏–º 
2. –°–µ—Ä–≤–∏—Å –¥–æ–∫–æ–≤ –±—É–¥–µ—Ç –æ—á–µ–Ω—å –¥–æ–ª–≥–æ –¥–µ–ª–∞—Ç—å—Å—è (–º–Ω–æ–≥–æ –∫–æ—Ä–Ω–µ—Ä –∫–µ–π—Å–æ–≤)
   - –î–∞ –Ω—É–∂–Ω–æ –±—Ä–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π OCR
3. –ú–æ–∂–Ω–æ —Å–ª–æ–≤–∏—Ç—å –±–∞–Ω –æ—Ç VK
   - –ù–∞—á–∞—Ç—å —Å WEB –æ–Ω–ª–∏ –∏ TG –∫–∞–Ω–∞–ª–∞
   - –í—Ç–æ—Ä–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–µ–π –¥–µ–ª–∞–µ–º –±–æ—Ç TG